{% load static %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Matrix</title>
    <link rel="stylesheet"  href="{% static 'css/register.css' %}" type="text/css">
</head>
<body>
     <div class="whole" style="justify-content:center">
         <div class="log" style="margin-right:0vw;">
            <div class="login">
               <div class="logo">
                   Matrix
               </div>
               <form method="post" autocomplete="off" action="newuser" >
                   {% csrf_token %}
                   <div class="incon">
                         <input type="text" name="email" class="inp" placeholder="Email" required>
                         <input type="text" name="name" class="inp" placeholder="Name" required>
                         <input type="text" name="username" class="inp" id="username" required placeholder="Username" oninput="check()" onchange="check()">
                         <input type="password" name="pass" id="password()" class="inp" required placeholder="Password">
                         <button  id="but" class="inp"  >Sign up</button>
                   </div>
               </form>
            </div>
             <div class="reg">
                 Do you have an account? <a href="/"> Sign in</a>
             </div>
         </div>
     </div>
<script>
    function check(){
        var inp=document.getElementById("username")
        var button=document.getElementById("but")
        var user=document.getElementById("username").value
        var url="validate/"+user
        fetch(url).then(res=>res.text()).then(data=>{
           if(data=="False")
           {
              inp.style.boxShadow="0px 0px 10px red";
              but.disabled=true
           }
           else{
              inp.style.boxShadow="none";
              but.disabled=false
           }
        })
    }

</script>
</body>
</html>